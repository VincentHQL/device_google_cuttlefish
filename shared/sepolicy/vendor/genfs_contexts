# arguments:
# $1 = pci prefix
pushdef(`cf_pci_gpu_device', `
genfscon sysfs $1/device u:object_r:sysfs_gpu:s0
genfscon sysfs $1/subsystem_device u:object_r:sysfs_gpu:s0
genfscon sysfs $1/subsystem_vendor u:object_r:sysfs_gpu:s0
genfscon sysfs $1/uevent u:object_r:sysfs_gpu:s0
genfscon sysfs $1/vendor u:object_r:sysfs_gpu:s0
')

# crosvm (x86)
cf_pci_gpu_device(/devices/pci0000:00/0000:00:0e.0)
# crosvm (arm64)
cf_pci_gpu_device(/devices/platform/10000.pci/pci0000:00/0000:00:0e.0)
# qemu (aarch64)
cf_pci_gpu_device(/devices/platform/4010000000.pcie/pci0000:00/0000:00:0c.0)

popdef(`cf_pci_gpu_device')

# crosvm (x86)
## find /sys/devices/platform/* -type d -name 'rtc[0-9]' | sed 's,/rtc[0-9],,'
genfscon sysfs /devices/platform/rtc_cmos/rtc u:object_r:sysfs_rtc:s0
## find /sys/devices/platform/* -type d -name 'wakeup[0-9]'
genfscon sysfs /devices/platform/rtc_cmos/wakeup/wakeup0 u:object_r:sysfs_wakeup:s0
genfscon sysfs /devices/platform/rtc_cmos/rtc/rtc0/wakeup1 u:object_r:sysfs_wakeup:s0 # <= 5.5
genfscon sysfs /devices/platform/rtc_cmos/rtc/rtc0/alarmtimer.0.auto/wakeup/wakeup1 u:object_r:sysfs_wakeup:s0 # >5.5
genfscon sysfs /devices/platform/rtc-test.1/wakeup/wakeup2 u:object_r:sysfs_wakeup:s0
genfscon sysfs /devices/platform/rtc-test.2/wakeup/wakeup3 u:object_r:sysfs_wakeup:s0

# crosvm (arm64)
## find /sys/devices/platform/* -type d -name 'rtc[0-9]' | sed 's,/rtc[0-9],,'
genfscon sysfs /devices/platform/2000.rtc/rtc u:object_r:sysfs_rtc:s0
## find /sys/devices/platform/* -type d -name 'wakeup[0-9]'
## arm64 2000.rtc on crosvm does not currently expose a wakeup node
genfscon sysfs /devices/platform/rtc-test.1/wakeup/wakeup0 u:object_r:sysfs_wakeup:s0
genfscon sysfs /devices/platform/rtc-test.1/rtc/rtc2/wakeup1 u:object_r:sysfs_wakeup:s0 # <= 5.5
genfscon sysfs /devices/platform/rtc-test.1/rtc/rtc2/alarmtimer.0.auto/wakeup/wakeup1 u:object_r:sysfs_wakeup:s0 # >5.5
genfscon sysfs /devices/platform/rtc-test.2/wakeup/wakeup2 u:object_r:sysfs_wakeup:s0

# qemu (x86)
## find /sys/devices/platform/* -type d -name 'rtc[0-9]' | sed 's,/rtc[0-9],,'
genfscon sysfs /devices/pnp0/00:04/rtc u:object_r:sysfs_rtc:s0
## find /sys/devices/platform/* -type d -name 'wakeup[0-9][0-9]'
genfscon sysfs /devices/pnp0/00:04/wakeup/wakeup19 u:object_r:sysfs_wakeup:s0
genfscon sysfs /devices/pnp0/00:04/rtc/rtc0/wakeup20 u:object_r:sysfs_wakeup:s0 # <= 5.5
genfscon sysfs /devices/pnp0/00:04/rtc/rtc0/alarmtimer.0.auto/wakeup/wakeup20 u:object_r:sysfs_wakeup:s0 # >5.5
genfscon sysfs /devices/platform/rtc-test.1/wakeup/wakeup21 u:object_r:sysfs_wakeup:s0
genfscon sysfs /devices/platform/rtc-test.2/wakeup/wakeup22 u:object_r:sysfs_wakeup:s0

# qemu (arm64)
## find /sys/devices/platform/* -type d -name 'rtc[0-9]' | sed 's,/rtc[0-9],,'
genfscon sysfs /devices/platform/9010000.pl031/rtc u:object_r:sysfs_rtc:s0
## find /sys/devices/platform/* -type d -name 'wakeup[0-9]'
genfscon sysfs /devices/platform/9010000.pl031/wakeup/wakeup0 u:object_r:sysfs_wakeup:s0
genfscon sysfs /devices/platform/9010000.pl031/rtc/rtc0/wakeup1 u:object_r:sysfs_wakeup:s0 # <= 5.5
genfscon sysfs /devices/platform/9010000.pl031/rtc/rtc0/alarmtimer.0.auto/wakeup/wakeup1 u:object_r:sysfs_wakeup:s0 # >5.5

# common on all platforms / vm managers
genfscon sysfs /devices/platform/rtc-test.0/rtc u:object_r:sysfs_rtc:s0
genfscon sysfs /devices/platform/rtc-test.1/rtc u:object_r:sysfs_rtc:s0
genfscon sysfs /devices/platform/rtc-test.2/rtc u:object_r:sysfs_rtc:s0
genfscon sysfs /bus/iio/devices u:object_r:sysfs_iio_devices:s0
